{"ast":null,"code":"var _jsxFileName = \"/Users/johncomonitski/Programming Projects/Dashboard2/Dashboard/src/pages/StreamAlerts.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { faCashRegister, faChartLine } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Nav, Card, Form, Button, Table, Dropdown, ButtonGroup, InputGroup } from '@themesberg/react-bootstrap';\nimport { CounterWidget, CircleChartWidget, BarChartWidget, ProductsWidget, ProgressTrackWidget, RankingWidget, SalesValueWidget, SalesValueWidgetPhone, AcquisitionWidget } from \"../components/Widgets\";\nimport { PageVisitsTable, TransactionsTable } from \"../components/Tables\";\nimport { UserContext } from \"./UserContext\";\nimport { AlertTable } from \"../components/AlertWidgets\";\nexport default (props => {\n  //User\n  const {\n    user,\n    setUser\n  } = useContext(UserContext);\n  const [settings, setSettings] = useState({});\n  const [alertList, setAlertList] = useState([]);\n  useEffect(() => {\n    (async () => {\n      var tmp = await getSettings(user.id); //setSettings(tmp);\n\n      getAlertNames(user.id, setAlertList);\n    })();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, \" Stream Alerts\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex ms-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    id: \"1\",\n    variant: \"secondary\",\n    size: \"sm\",\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }\n  }, \"Save\"), /*#__PURE__*/React.createElement(Button, {\n    id: \"2\",\n    variant: \"secondary\",\n    size: \"sm\",\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }\n  }, \"Test\"))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CounterWidget, {\n    category: \"Profit\",\n    title: \"\",\n    period: \"\",\n    percentage: 28.4,\n    icon: faCashRegister,\n    iconColor: \"shape-tertiary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CircleChartWidget, {\n    title: \"Products\",\n    data: [],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    border: \"light\",\n    className: \"bg-white shadow-sm mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 15\n    }\n  }, \"Alert Link\"), /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 10,\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    id: \"link\",\n    value: \"https://creatorinventory.com/alerts/\" + user.id.toLowerCase(),\n    required: true,\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 2,\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    onClick: copyLink,\n    type: \"button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, \"Copy\")))))))), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }, \" Most recent alerts\"), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    xl: 12,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(AlertTable, {\n    data: alertList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  })))));\n});\n\nfunction copyLink() {\n  var linkHolder = document.getElementById(\"link\");\n  linkHolder.select();\n  linkHolder.setSelectionRange(0, 99999);\n  /* For mobile devices */\n\n  document.execCommand(\"copy\");\n  alert(\"Copied the text: \" + linkHolder.value);\n}\n\nasync function getSettings(id) {\n  var url = \"https://rf8fbiwmr5.execute-api.us-west-2.amazonaws.com/dev/StreamAlert?id=\" + id + \"&mode=get\";\n  const Response = await new Promise((resolve, reject) => {\n    var req = fetch(url, {\n      method: 'GET',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'same-origin',\n      // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'text/plain' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      redirect: 'follow',\n      // manual, *follow, error\n      referrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\n    });\n    req.then(result => {\n      var res = result.json();\n      res.then(tmp => {\n        resolve({\n          statusCode: 200,\n          body: JSON.stringify(tmp, null, 4)\n        });\n      });\n    });\n  });\n  var tmp = JSON.parse(Response.body);\n  return tmp;\n}\n\nasync function getAlertNames(id, setAlertList) {\n  //Get All Names\n  var url = \"https://rf8fbiwmr5.execute-api.us-west-2.amazonaws.com/dev/StreamAlert?id=\" + id + \"&mode=names\";\n  const Response = await new Promise((resolve, reject) => {\n    var req = fetch(url, {\n      method: 'GET',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'same-origin',\n      // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'text/plain' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      redirect: 'follow',\n      // manual, *follow, error\n      referrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\n    });\n    req.then(result => {\n      var res = result.json();\n      res.then(tmp => {\n        resolve({\n          statusCode: 200,\n          body: JSON.stringify(tmp, null, 4)\n        });\n      });\n    });\n  });\n  var allNames = JSON.parse(Response.body).rows; //Prep Names\n\n  var tmp = [];\n\n  for (var i = 0; i < allNames.length; i++) {\n    var row = {\n      \"date\": allNames[i].date.substring(0, 10),\n      \"name\": allNames[i].name,\n      \"order\": allNames[i].short_name\n    };\n    tmp.push(row);\n  }\n\n  setAlertList(tmp);\n  setTimeout(getAlertNames, 20000, id, setAlertList);\n}","map":{"version":3,"sources":["/Users/johncomonitski/Programming Projects/Dashboard2/Dashboard/src/pages/StreamAlerts.js"],"names":["React","useState","useEffect","useContext","faCashRegister","faChartLine","Col","Row","Nav","Card","Form","Button","Table","Dropdown","ButtonGroup","InputGroup","CounterWidget","CircleChartWidget","BarChartWidget","ProductsWidget","ProgressTrackWidget","RankingWidget","SalesValueWidget","SalesValueWidgetPhone","AcquisitionWidget","PageVisitsTable","TransactionsTable","UserContext","AlertTable","props","user","setUser","settings","setSettings","alertList","setAlertList","tmp","getSettings","id","getAlertNames","toLowerCase","copyLink","linkHolder","document","getElementById","select","setSelectionRange","execCommand","alert","value","url","Response","Promise","resolve","reject","req","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","then","result","res","json","statusCode","body","JSON","stringify","parse","allNames","rows","i","length","row","date","substring","name","short_name","push","setTimeout"],"mappings":";AACA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,SAASC,cAAT,EAAyBC,WAAzB,QAA4C,mCAA5C;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,GAAnB,EAAwBC,IAAxB,EAA8BC,IAA9B,EAAoCC,MAApC,EAA4CC,KAA5C,EAAmDC,QAAnD,EAA6DC,WAA7D,EAA0EC,UAA1E,QAA4F,6BAA5F;AACA,SAASC,aAAT,EAAwBC,iBAAxB,EAA2CC,cAA3C,EAA2DC,cAA3D,EAA2EC,mBAA3E,EAAgGC,aAAhG,EAA+GC,gBAA/G,EAAiIC,qBAAjI,EAAwJC,iBAAxJ,QAAiL,uBAAjL;AACA,SAASC,eAAT,EAA0BC,iBAA1B,QAAmD,sBAAnD;AAEA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,UAAT,QAA2B,4BAA3B;AAEA,gBAAgBC,KAAD,IAAW;AACxB;AACA,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA;AAAP,MAAkB5B,UAAU,CAACwB,WAAD,CAAlC;AACA,QAAM,CAACK,QAAD,EAAWC,WAAX,IAA0BhC,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACiC,SAAD,EAAYC,YAAZ,IAA4BlC,QAAQ,CAAC,EAAD,CAA1C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,KAAC,YAAW;AACV,UAAIkC,GAAG,GAAG,MAAMC,WAAW,CAACP,IAAI,CAACQ,EAAN,CAA3B,CADU,CAEV;;AACAC,MAAAA,aAAa,CAACT,IAAI,CAACQ,EAAN,EAAUH,YAAV,CAAb;AACD,KAJD;AAKD,GANQ,EAMP,EANO,CAAT;AAQA,sBACE,uDACE;AAAK,IAAA,SAAS,EAAC,iFAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAGE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,MAAD;AAAQ,IAAA,EAAE,EAAC,GAAX;AAAe,IAAA,OAAO,EAAC,WAAvB;AAAmC,IAAA,IAAI,EAAC,IAAxC;AAA6C,IAAA,SAAS,EAAC,MAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI,oBAAC,MAAD;AAAQ,IAAA,EAAE,EAAC,GAAX;AAAe,IAAA,OAAO,EAAC,WAAvB;AAAmC,IAAA,IAAI,EAAC,IAAxC;AAA6C,IAAA,SAAS,EAAC,MAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,CAHF,CADF,eAUE,oBAAC,GAAD;AAAK,IAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,CAAjB;AAAoB,IAAA,EAAE,EAAE,CAAxB;AAA2B,IAAA,SAAS,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,aAAD;AACE,IAAA,QAAQ,EAAC,QADX;AAEE,IAAA,KAAK,EAAE,EAFT;AAGE,IAAA,MAAM,EAAE,EAHV;AAIE,IAAA,UAAU,EAAE,IAJd;AAKE,IAAA,IAAI,EAAE/B,cALR;AAME,IAAA,SAAS,EAAC,gBANZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,eAaE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,CAAjB;AAAoB,IAAA,EAAE,EAAE,CAAxB;AAA2B,IAAA,SAAS,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,iBAAD;AACE,IAAA,KAAK,EAAC,UADR;AAEE,IAAA,IAAI,EAAE,EAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAbF,CAVF,eA+BE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,MAAM,EAAC,OAAb;AAAqB,IAAA,SAAS,EAAC,yBAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,IAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,SAAS,EAAC,MAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD,CAAM,OAAN;AAAc,IAAA,EAAE,EAAC,MAAjB;AAAwB,IAAA,KAAK,EAAE,yCAAuC0B,IAAI,CAACQ,EAAL,CAAQE,WAAR,EAAtE;AAA6F,IAAA,QAAQ,MAArG;AAAsG,IAAA,IAAI,EAAC,MAA3G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,eAOE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAY,IAAA,SAAS,EAAC,MAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAC,SAAhB;AAA0B,IAAA,OAAO,EAAEC,QAAnC;AAA4C,IAAA,IAAI,EAAC,QAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CAPF,CADF,CAFF,CADF,CADF,CADF,CA/BF,eAsDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAtDF,eAuDE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,EAAT;AAAa,IAAA,EAAE,EAAE,EAAjB;AAAqB,IAAA,SAAS,EAAC,MAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAEP,SAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CADF,CAvDF,CADF;AAiED,CA/ED;;AAiFA,SAASO,QAAT,GAAmB;AACjB,MAAIC,UAAU,GAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAjB;AACAF,EAAAA,UAAU,CAACG,MAAX;AACAH,EAAAA,UAAU,CAACI,iBAAX,CAA6B,CAA7B,EAAgC,KAAhC;AAAwC;;AACxCH,EAAAA,QAAQ,CAACI,WAAT,CAAqB,MAArB;AAEAC,EAAAA,KAAK,CAAC,sBAAsBN,UAAU,CAACO,KAAlC,CAAL;AACD;;AAGD,eAAeZ,WAAf,CAA2BC,EAA3B,EAA8B;AAC5B,MAAIY,GAAG,GAAG,+EAA+EZ,EAA/E,GAAoF,WAA9F;AAEA,QAAMa,QAAQ,GAAG,MAAM,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACzD,QAAIC,GAAG,GAAGC,KAAK,CAACN,GAAD,EAAM;AACpBO,MAAAA,MAAM,EAAE,KADY;AACL;AACfC,MAAAA,IAAI,EAAE,MAFc;AAEN;AACdC,MAAAA,KAAK,EAAE,UAHa;AAGD;AACnBC,MAAAA,WAAW,EAAE,aAJO;AAIQ;AAC5BC,MAAAA,OAAO,EAAE;AACP,wBAAgB,YADT,CAEP;;AAFO,OALW;AASpBC,MAAAA,QAAQ,EAAE,QATU;AASA;AACpBC,MAAAA,cAAc,EAAE,aAVI,CAUU;;AAVV,KAAN,CAAf;AAYAR,IAAAA,GAAG,CAACS,IAAJ,CAAUC,MAAD,IAAY;AACjB,UAAIC,GAAG,GAAGD,MAAM,CAACE,IAAP,EAAV;AACAD,MAAAA,GAAG,CAACF,IAAJ,CAAU5B,GAAD,IAAS;AACdiB,QAAAA,OAAO,CAAC;AACPe,UAAAA,UAAU,EAAE,GADL;AAEPC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAenC,GAAf,EAAoB,IAApB,EAA0B,CAA1B;AAFC,SAAD,CAAP;AAIH,OALD;AAMH,KARD;AASE,GAtBsB,CAAvB;AAuBA,MAAIA,GAAG,GAAIkC,IAAI,CAACE,KAAL,CAAWrB,QAAQ,CAACkB,IAApB,CAAX;AACA,SAAOjC,GAAP;AACD;;AAED,eAAeG,aAAf,CAA6BD,EAA7B,EAAiCH,YAAjC,EAA8C;AAC1C;AACA,MAAIe,GAAG,GAAG,+EAA+EZ,EAA/E,GAAoF,aAA9F;AACA,QAAMa,QAAQ,GAAG,MAAM,IAAIC,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AACtD,QAAIC,GAAG,GAAGC,KAAK,CAACN,GAAD,EAAM;AACpBO,MAAAA,MAAM,EAAE,KADY;AACL;AACfC,MAAAA,IAAI,EAAE,MAFc;AAEN;AACdC,MAAAA,KAAK,EAAE,UAHa;AAGD;AACnBC,MAAAA,WAAW,EAAE,aAJO;AAIQ;AAC5BC,MAAAA,OAAO,EAAE;AACP,wBAAgB,YADT,CAEP;;AAFO,OALW;AASpBC,MAAAA,QAAQ,EAAE,QATU;AASA;AACpBC,MAAAA,cAAc,EAAE,aAVI,CAUU;;AAVV,KAAN,CAAf;AAYAR,IAAAA,GAAG,CAACS,IAAJ,CAAUC,MAAD,IAAY;AACjB,UAAIC,GAAG,GAAGD,MAAM,CAACE,IAAP,EAAV;AACAD,MAAAA,GAAG,CAACF,IAAJ,CAAU5B,GAAD,IAAS;AACdiB,QAAAA,OAAO,CAAC;AACVe,UAAAA,UAAU,EAAE,GADF;AAEVC,UAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAenC,GAAf,EAAoB,IAApB,EAA0B,CAA1B;AAFI,SAAD,CAAP;AAIH,OALD;AAMH,KARD;AASD,GAtBsB,CAAvB;AAuBA,MAAIqC,QAAQ,GAAGH,IAAI,CAACE,KAAL,CAAWrB,QAAQ,CAACkB,IAApB,EAA0BK,IAAzC,CA1B0C,CA4B1C;;AACA,MAAItC,GAAG,GAAG,EAAV;;AACA,OAAI,IAAIuC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGF,QAAQ,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACtC,QAAIE,GAAG,GAAG;AAAC,cAAQJ,QAAQ,CAACE,CAAD,CAAR,CAAYG,IAAZ,CAAiBC,SAAjB,CAA2B,CAA3B,EAA6B,EAA7B,CAAT;AAA2C,cAAQN,QAAQ,CAACE,CAAD,CAAR,CAAYK,IAA/D;AAAqE,eAASP,QAAQ,CAACE,CAAD,CAAR,CAAYM;AAA1F,KAAV;AACA7C,IAAAA,GAAG,CAAC8C,IAAJ,CAASL,GAAT;AACD;;AAED1C,EAAAA,YAAY,CAACC,GAAD,CAAZ;AACA+C,EAAAA,UAAU,CAAC5C,aAAD,EAAgB,KAAhB,EAAuBD,EAAvB,EAA2BH,YAA3B,CAAV;AACH","sourcesContent":["\nimport React, { useState, useEffect, useContext } from 'react';\nimport { faCashRegister, faChartLine } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Nav, Card, Form, Button, Table, Dropdown, ButtonGroup, InputGroup } from '@themesberg/react-bootstrap';\nimport { CounterWidget, CircleChartWidget, BarChartWidget, ProductsWidget, ProgressTrackWidget, RankingWidget, SalesValueWidget, SalesValueWidgetPhone, AcquisitionWidget } from \"../components/Widgets\";\nimport { PageVisitsTable, TransactionsTable } from \"../components/Tables\";\n\nimport { UserContext } from \"./UserContext\";\nimport { AlertTable } from \"../components/AlertWidgets\"\n\nexport default (props) => {\n  //User\n  const {user, setUser} = useContext(UserContext);\n  const [settings, setSettings] = useState({});\n  const [alertList, setAlertList] = useState([]);\n\n  useEffect(() => {\n    (async() => {\n      var tmp = await getSettings(user.id);\n      //setSettings(tmp);\n      getAlertNames(user.id, setAlertList)\n    })()\n  },[])\n\n  return (\n    <>\n      <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4\">\n        <h2> Stream Alerts</h2>\n\n        <div className=\"d-flex ms-auto\">\n            <Button id=\"1\" variant=\"secondary\" size=\"sm\" className=\"me-2\" >Save</Button>\n            <Button id=\"2\" variant=\"secondary\" size=\"sm\" className=\"me-2\" >Test</Button>\n        </div>\n      </div>\n\n      <Row className=\"justify-content-md-center\">\n\n        <Col xs={12} sm={6} xl={4} className=\"mb-4\">\n          <CounterWidget\n            category=\"Profit\"\n            title={\"\"}\n            period={\"\"}\n            percentage={28.4}\n            icon={faCashRegister}\n            iconColor=\"shape-tertiary\"\n          />\n        </Col>\n\n        <Col xs={12} sm={6} xl={4} className=\"mb-4\">\n          <CircleChartWidget\n            title=\"Products\"\n            data={[]} />\n        </Col>\n\n      </Row>\n\n      <Row>\n        <Col >\n          <Card border=\"light\" className=\"bg-white shadow-sm mb-4\">\n            <Card.Body>\n              <h5 className=\"mb-4\">Alert Link</h5>\n              <Form>\n                <Row>\n                  <Col xs={10} className=\"mb-3\">\n                    <Form.Group >\n                      <Form.Control id=\"link\" value={\"https://creatorinventory.com/alerts/\"+user.id.toLowerCase()} required type=\"text\" />\n                    </Form.Group>\n\n                  </Col>\n                  <Col xs={2} className=\"mb-3\">\n                    <Button variant=\"primary\" onClick={copyLink}type=\"button\" >Copy</Button>\n                  </Col>\n                </Row>\n              </Form>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n\n      <h4> Most recent alerts</h4>\n      <Row>\n        <Col xs={12} xl={12} className=\"mb-4\">\n          <Row>\n            <AlertTable data={alertList} />\n          </Row>\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nfunction copyLink(){\n  var linkHolder = document.getElementById(\"link\")\n  linkHolder.select();\n  linkHolder.setSelectionRange(0, 99999); /* For mobile devices */\n  document.execCommand(\"copy\");\n\n  alert(\"Copied the text: \" + linkHolder.value);\n}\n\n\nasync function getSettings(id){\n  var url = \"https://rf8fbiwmr5.execute-api.us-west-2.amazonaws.com/dev/StreamAlert?id=\" + id + \"&mode=get\";\n\n  const Response = await new Promise((resolve, reject) => {\n\tvar req = fetch(url, {\n\t\tmethod: 'GET', // *GET, POST, PUT, DELETE, etc.\n\t\tmode: 'cors', // no-cors, *cors, same-origin\n\t\tcache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n\t\tcredentials: 'same-origin', // include, *same-origin, omit\n\t\theaders: {\n\t\t  'Content-Type': 'text/plain',\n\t\t  // 'Content-Type': 'application/x-www-form-urlencoded',\n\t\t},\n\t\tredirect: 'follow', // manual, *follow, error\n\t\treferrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\t});\n\treq.then((result) => {\n\t    var res = result.json()\n\t    res.then((tmp) => {\n\t        resolve({\n    \t\t    statusCode: 200,\n    \t\t    body: JSON.stringify(tmp, null, 4)\n    \t    });\n\t    });\n\t});\n  });\n  var tmp = (JSON.parse(Response.body));\n  return tmp;\n}\n\nasync function getAlertNames(id, setAlertList){\n    //Get All Names\n    var url = \"https://rf8fbiwmr5.execute-api.us-west-2.amazonaws.com/dev/StreamAlert?id=\" + id + \"&mode=names\";\n    const Response = await new Promise((resolve, reject) => {\n      var req = fetch(url, {\n      \tmethod: 'GET', // *GET, POST, PUT, DELETE, etc.\n      \tmode: 'cors', // no-cors, *cors, same-origin\n      \tcache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n      \tcredentials: 'same-origin', // include, *same-origin, omit\n      \theaders: {\n      \t  'Content-Type': 'text/plain',\n      \t  // 'Content-Type': 'application/x-www-form-urlencoded',\n      \t},\n      \tredirect: 'follow', // manual, *follow, error\n      \treferrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n      });\n      req.then((result) => {\n          var res = result.json()\n          res.then((tmp) => {\n              resolve({\n      \t\t    statusCode: 200,\n      \t\t    body: JSON.stringify(tmp, null, 4)\n      \t    });\n          });\n      });\n    });\n    var allNames = JSON.parse(Response.body).rows;\n\n    //Prep Names\n    var tmp = [];\n    for(var i = 0; i < allNames.length; i++){\n      var row = {\"date\": allNames[i].date.substring(0,10), \"name\": allNames[i].name, \"order\": allNames[i].short_name};\n      tmp.push(row);\n    }\n\n    setAlertList(tmp)\n    setTimeout(getAlertNames, 20000, id, setAlertList);\n}\n"]},"metadata":{},"sourceType":"module"}