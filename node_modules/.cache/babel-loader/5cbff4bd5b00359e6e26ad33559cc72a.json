{"ast":null,"code":"var _jsxFileName = \"/Users/johncomonitski/Programming Projects/Dashboard2/Dashboard/src/pages/dashboard/DashboardOverview.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { faCashRegister, faChartLine } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Button } from '@themesberg/react-bootstrap';\nimport { CounterWidget, CircleChartWidget, SalesValueWidget, SalesValueWidgetPhone } from \"../../components/Widgets\";\nimport { TransactionsTable } from \"../../components/Tables\";\nimport { Routes } from \"../../routes\";\nimport { UserContext } from \"../UserContext\";\nexport default (props => {\n  const emptyPackage = {\n    today: {\n      rows: [{\n        sales: 0,\n        day: \"\",\n        profit: 0,\n        product_id: \"\"\n      }],\n      period: \"\"\n    },\n    sales: {\n      firstDay: \"\",\n      lastDay: \"\",\n      total: 0,\n      days: {\n        sales: 0,\n        day: \"\",\n        profit: 0,\n        product_id: \"\"\n      }\n    },\n    campaigns: [],\n    products: {}\n  }; //User\n\n  const {\n    user,\n    setUser\n  } = useContext(UserContext); //UI Widgets\n\n  const [overview, setOverview] = useState(emptyPackage.today);\n  const [sales, setSales] = useState(emptyPackage.sales);\n  const [campaigns, setCampaigns] = useState(emptyPackage.campaigns);\n  const [productsNames, setProductsNames] = useState(emptyPackage.products);\n  useEffect(() => {\n    console.log(user); //Making sure we're logged in\n\n    if (props.history.location.state === undefined && (user.id === undefined || user.id === \"\")) {\n      props.history.push({\n        pathname: Routes.Signin.path\n      });\n    } else {\n      (async () => {\n        var channel_id;\n\n        if (props.history.location.state === undefined) {\n          channel_id = user.id;\n        } else {\n          channel_id = props.history.location.state;\n        } //Setting log in Package\n\n\n        var today = new Date();\n        var date = formatDate(today);\n        today.setDate(today.getDate() - 6);\n        var prevDate = formatDate(today);\n        var data = await new Promise((resolve, reject) => {\n          var req = queryDB(prevDate, date, \"login\", user.id);\n          req.then(result => {\n            resolve({\n              statusCode: 200,\n              body: JSON.stringify(result, null, 4)\n            });\n          });\n        }); //Setting up user\n\n        var logInPackage = JSON.parse(data.body);\n        logInPackage.sales[\"firstDay\"] = prevDate;\n        logInPackage.sales[\"lastDay\"] = date;\n        logInPackage.today.period = date;\n        setUser({\n          id: props.history.location.state,\n          name: logInPackage.client.rows[0].yt_name,\n          img: logInPackage.client.rows[0].logo,\n          rate: logInPackage.client.rows[0].rate,\n          settings: logInPackage.client.rows[0],\n          admin: logInPackage.client.rows[0].admin,\n          clients: logInPackage.clients\n        }); //Setting up UI\n\n        setProductsNames(getProductNames(logInPackage.campaigns));\n        setOverview(prepToday(logInPackage.today, productsNames));\n        setSales(prepSales(logInPackage.sales));\n        setCampaigns(prepCampaigns(logInPackage.campaigns, logInPackage.client.rows[0].rate));\n      })();\n    }\n  }, []); //Button Events\n\n  async function overviewToday() {\n    //change color\n    var classname = document.getElementById(\"1\").className;\n    classname = classname.replace(\"btn-secondary\", \"btn-primary\");\n    document.getElementById(\"1\").className = classname;\n    classname = document.getElementById(\"2\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"2\").className = classname;\n    classname = document.getElementById(\"3\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"3\").className = classname; //Getting today\n\n    var today = new Date();\n    var date = formatDate(today);\n    var data = await queryDB(date, \"\", \"sales\", user.id);\n    data.period = \"date\";\n\n    if (data.rows.length === 0) {\n      setOverview(prepToday({\n        rows: [{\n          sales: 0,\n          day: date,\n          profit: 0,\n          product_id: \"\"\n        }],\n        period: date\n      }, {}));\n    } else {\n      setOverview(prepToday(data, productsNames));\n    }\n  }\n\n  async function overviewWeek() {\n    //change color\n    var classname = document.getElementById(\"1\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"1\").className = classname;\n    classname = document.getElementById(\"2\").className;\n    classname = classname.replace(\"btn-secondary\", \"btn-primary\");\n    document.getElementById(\"2\").className = classname;\n    classname = document.getElementById(\"3\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"3\").className = classname; //Getting today\n\n    var today = new Date();\n    var date = formatDate(today);\n    today.setDate(today.getDate() - 6);\n    var prevDate = formatDate(today);\n    var data = await queryDB(prevDate, date, \"sales\", user.id);\n    data.period = \"This week\";\n\n    if (data.rows.length === 0) {\n      setOverview(prepToday({\n        rows: [{\n          sales: 0,\n          day: date,\n          profit: 0,\n          product_id: \"\"\n        }],\n        period: \"This Week\"\n      }, {}));\n    } else {\n      setOverview(prepToday(data, productsNames));\n    }\n  }\n\n  async function overviewMonth() {\n    //change color\n    var classname = document.getElementById(\"1\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"1\").className = classname;\n    classname = document.getElementById(\"2\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"2\").className = classname;\n    classname = document.getElementById(\"3\").className;\n    classname = classname.replace(\"btn-secondary\", \"btn-primary\");\n    document.getElementById(\"3\").className = classname; //Getting today\n\n    var today = new Date();\n    var firstDay = new Date(today.getFullYear(), today.getMonth(), 1);\n    var lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);\n    var date = formatDate(firstDay);\n    var prevDate = formatDate(lastDay);\n    var data = await queryDB(date, prevDate, \"sales\", user.id);\n    data.period = \"This month\";\n\n    if (data.rows.length === 0) {\n      setOverview(prepToday({\n        rows: [{\n          sales: 0,\n          day: date,\n          profit: 0,\n          product_id: \"\"\n        }],\n        period: \"This month\"\n      }, {}));\n    } else {\n      setOverview(prepToday(data, productsNames));\n    }\n  }\n\n  async function salesWeek() {\n    //change color\n    var classname = document.getElementById(\"4\").className;\n    classname = classname.replace(\"btn-secondary\", \"btn-primary\");\n    document.getElementById(\"4\").className = classname;\n    classname = document.getElementById(\"5\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"5\").className = classname;\n    classname = document.getElementById(\"6\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"6\").className = classname; //Getting today\n\n    var today = new Date();\n    var date = formatDate(today);\n    today.setDate(today.getDate() - 6);\n    var prevDate = formatDate(today);\n    var data = await queryDB(prevDate, date, \"sales\", user.id);\n\n    if (data.rows.length === 0) {\n      setSales(prepSales({\n        firstDay: \"\",\n        lastDay: \"\",\n        rows: [{\n          sales: 0,\n          day: date,\n          profit: 0,\n          product_id: \"\"\n        }]\n      }));\n    } else {\n      data[\"firstDay\"] = prevDate;\n      data[\"lastDay\"] = date;\n      setSales(prepSales(data));\n    }\n  }\n\n  async function salesMonth() {\n    //change color\n    var classname = document.getElementById(\"4\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"4\").className = classname;\n    classname = document.getElementById(\"5\").className;\n    classname = classname.replace(\"btn-secondary\", \"btn-primary\");\n    document.getElementById(\"5\").className = classname;\n    classname = document.getElementById(\"6\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"6\").className = classname; //Getting today\n\n    var today = new Date();\n    var firstDay = new Date(today.getFullYear(), today.getMonth(), 1);\n    var lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);\n    var date = formatDate(firstDay);\n    var prevDate = formatDate(lastDay);\n    var data = await queryDB(date, prevDate, \"sales\", user.id);\n\n    if (data.rows.length === 0) {\n      setSales(prepSales({\n        firstDay: \"\",\n        lastDay: \"\",\n        rows: [{\n          sales: 0,\n          day: date,\n          profit: 0,\n          product_id: \"\"\n        }]\n      }));\n    } else {\n      data[\"firstDay\"] = date;\n      data[\"lastDay\"] = prevDate;\n      setSales(prepSales(data));\n    }\n  }\n\n  async function salesCustom(e, range) {\n    //console.log(range)\n    //change color\n    var classname = document.getElementById(\"4\").className;\n    classname = classname.replace(\"btn-primary\", \"btn-secondary\");\n    document.getElementById(\"4\").className = classname;\n    classname = document.getElementById(\"5\").className;\n    classname = classname.replace(\"btn-secondary\", \"btn-secondary\");\n    document.getElementById(\"5\").className = classname;\n    classname = document.getElementById(\"6\").className;\n    classname = classname.replace(\"btn-secondary\", \"btn-primary\");\n    document.getElementById(\"6\").className = classname;\n    var start = range.startDate;\n    var end = range.endDate;\n    var date = formatDate(new Date(start));\n    var prevDate = formatDate(new Date(end));\n    var data = await queryDB(date, prevDate, \"sales\", user.id);\n\n    if (data.rows.length === 0) {\n      setSales(prepSales({\n        firstDay: \"\",\n        lastDay: \"\",\n        rows: [{\n          sales: 0,\n          day: date,\n          profit: 0,\n          product_id: \"\"\n        }]\n      }));\n    } else {\n      data[\"firstDay\"] = date;\n      data[\"lastDay\"] = prevDate;\n      setSales(prepSales(data));\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 9\n    }\n  }, \" Sales Overview\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex ms-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    id: \"1\",\n    variant: \"primary\",\n    size: \"sm\",\n    className: \"me-2\",\n    onClick: overviewToday,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 13\n    }\n  }, \"Today\"), /*#__PURE__*/React.createElement(Button, {\n    id: \"2\",\n    variant: \"secondary\",\n    size: \"sm\",\n    className: \"me-2\",\n    onClick: overviewWeek,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 13\n    }\n  }, \"This Week\"), /*#__PURE__*/React.createElement(Button, {\n    id: \"3\",\n    variant: \"secondary\",\n    size: \"sm\",\n    className: \"me-3\",\n    onClick: overviewMonth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 13\n    }\n  }, \"This Month\"))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CounterWidget, {\n    category: \"Sales\",\n    title: overview.sales,\n    period: overview.period,\n    percentage: 0,\n    icon: faChartLine,\n    iconColor: \"shape-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CounterWidget, {\n    category: \"Profit\",\n    title: (parseInt(overview.profit) * user.rate).toFixed(2),\n    period: overview.period,\n    percentage: 28.4,\n    icon: faCashRegister,\n    iconColor: \"shape-tertiary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CircleChartWidget, {\n    title: \"Products\",\n    data: overview.products,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"mb-4 d-none d-sm-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SalesValueWidget, {\n    title: \"Sales Profit\",\n    value: sales.total * user.rate,\n    data: sales.days,\n    custom: salesCustom,\n    week: salesWeek,\n    month: salesMonth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"mb-4 d-sm-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SalesValueWidgetPhone, {\n    title: \"Sales Value\",\n    value: sales.total * user.rate,\n    data: sales.days,\n    custom: salesCustom,\n    week: salesWeek,\n    month: salesMonth,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    xl: 12,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TransactionsTable, {\n    data: campaigns,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 13\n    }\n  })))));\n});\n\nfunction prepToday(data, productsNames) {\n  var products = {};\n  var tmp = {\n    \"sales\": 0,\n    \"profit\": 0,\n    \"products\": [],\n    \"date\": formatDate(new Date())\n  };\n\n  for (var i = 0; i < data.rows.length; i++) {\n    tmp[\"sales\"] = tmp[\"sales\"] + data.rows[i].sales;\n    tmp[\"profit\"] = tmp[\"profit\"] + data.rows[i].profit;\n\n    if (products[data.rows[i].product_id] === undefined) {\n      products[data.rows[i].product_id] = data.rows[i].sales;\n    } else {\n      products[data.rows[i].product_id] = data.rows[i].sales + products[data.rows[i].product_id];\n    }\n  }\n\n  if (tmp.sales !== 0) {\n    i = 0;\n\n    for (const product in products) {\n      tmp.products.push({\n        \"id\": i + 1,\n        \"label\": productsNames[product],\n        \"value\": products[product]\n      });\n      i = i + 1;\n    }\n  }\n\n  tmp.period = data.period;\n  return tmp;\n}\n\nfunction prepSales(data) {\n  var tmp = {\n    \"total\": 0,\n    \"days\": {\n      \"labels\": [],\n      \"series\": []\n    }\n  };\n  var days = {}; //Create days data structure\n\n  if (data.firstDay !== \"\") {\n    var start = new Date(data.firstDay);\n    start.setDate(start.getDate() + 1);\n    var end = new Date(data.lastDay);\n    end.setDate(end.getDate() + 1);\n    var loop = new Date(start);\n\n    while (loop <= end) {\n      var date = formatDate(loop);\n      date = date.substring(5, 7) + \"/\" + date.substring(8, 10);\n      days[date] = 0;\n      var newDate = loop.setDate(loop.getDate() + 1);\n      loop = new Date(newDate);\n    }\n  } //fill in dates\n\n\n  for (var i = 0; i < data.rows.length; i++) {\n    tmp.total = tmp.total + data.rows[i].profit;\n    date = data.rows[i].day.substring(5, 7) + \"/\" + data.rows[i].day.substring(8, 10);\n\n    if (days[date] === undefined) {\n      days[date] = data.rows[i].sales;\n    } else {\n      days[date] = days[date] + data.rows[i].sales;\n    }\n  }\n\n  var series = [];\n\n  for (const day in days) {\n    tmp.days.labels.push(day);\n    series.push(days[day]);\n  }\n\n  tmp.days.series.push(series);\n  return tmp;\n}\n\nfunction prepCampaigns(data, rate) {\n  var tmp = [];\n\n  for (var i = 0; i < data.rows.length; i++) {\n    var row = {\n      \"products\": data.rows[i].img_url,\n      \"day\": data.rows[i].start_date.substring(0, 10),\n      \"sales\": data.rows[i].sales,\n      \"profit\": (data.rows[i].profit * rate).toFixed(2)\n    };\n    tmp.push(row);\n  }\n\n  return tmp;\n}\n\nfunction getProductNames(data) {\n  var tmp = {};\n\n  for (var i = 0; i < data.rows.length; i++) {\n    tmp[data.rows[i].product_id] = data.rows[i].short_name;\n  }\n\n  return tmp;\n}\n\nasync function queryDB(start, end, q, id) {\n  //Building API Call\n  var url = \"https://d7rc7vsgld.execute-api.us-west-2.amazonaws.com/dev/q?id=\" + id;\n\n  if (q !== \"\") {\n    url += \"&q=\" + q;\n  }\n\n  if (start !== \"\") {\n    url += \"&start=\" + start;\n  }\n\n  if (end !== \"\") {\n    url += \"&end=\" + end;\n  } //Making Call\n\n\n  const Response = await new Promise((resolve, reject) => {\n    var req = fetch(url, {\n      method: 'GET',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'same-origin',\n      // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'text/plain' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      redirect: 'follow',\n      // manual, *follow, error\n      referrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\n    });\n    req.then(result => {\n      var res = result.json();\n      res.then(tmp => {\n        resolve({\n          statusCode: 200,\n          body: JSON.stringify(tmp, null, 4)\n        });\n      });\n    });\n  });\n  var tmp = JSON.parse(Response.body);\n  return tmp;\n}\n\nfunction formatDate(day) {\n  var date;\n\n  if (day.getMonth() < 9) {\n    date = day.getFullYear() + '-0' + (day.getMonth() + 1);\n  } else {\n    date = day.getFullYear() + '-' + (day.getMonth() + 1);\n  }\n\n  if (day.getDate() < 9) {\n    date = date + '-0' + day.getDate();\n  } else {\n    date = date + '-' + day.getDate();\n  }\n\n  return date;\n}","map":{"version":3,"sources":["/Users/johncomonitski/Programming Projects/Dashboard2/Dashboard/src/pages/dashboard/DashboardOverview.js"],"names":["React","useState","useEffect","useContext","faCashRegister","faChartLine","Col","Row","Button","CounterWidget","CircleChartWidget","SalesValueWidget","SalesValueWidgetPhone","TransactionsTable","Routes","UserContext","props","emptyPackage","today","rows","sales","day","profit","product_id","period","firstDay","lastDay","total","days","campaigns","products","user","setUser","overview","setOverview","setSales","setCampaigns","productsNames","setProductsNames","console","log","history","location","state","undefined","id","push","pathname","Signin","path","channel_id","Date","date","formatDate","setDate","getDate","prevDate","data","Promise","resolve","reject","req","queryDB","then","result","statusCode","body","JSON","stringify","logInPackage","parse","name","client","yt_name","img","logo","rate","settings","admin","clients","getProductNames","prepToday","prepSales","prepCampaigns","overviewToday","classname","document","getElementById","className","replace","length","overviewWeek","overviewMonth","getFullYear","getMonth","salesWeek","salesMonth","salesCustom","e","range","start","startDate","end","endDate","parseInt","toFixed","tmp","i","product","loop","substring","newDate","series","labels","row","img_url","start_date","short_name","q","url","Response","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","res","json"],"mappings":"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","sourcesContent":["\nimport React, { useState, useEffect, useContext } from 'react';\nimport { faCashRegister, faChartLine } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Button } from '@themesberg/react-bootstrap';\nimport { CounterWidget, CircleChartWidget, SalesValueWidget, SalesValueWidgetPhone } from \"../../components/Widgets\";\nimport { TransactionsTable } from \"../../components/Tables\";\nimport { Routes } from \"../../routes\";\nimport { UserContext } from \"../UserContext\";\n\nexport default (props) => {\n\n  const emptyPackage = {\n    today: {rows:[{sales:0, day:\"\", profit:0, product_id:\"\"}], period:\"\"},\n    sales: {firstDay: \"\", lastDay: \"\", total: 0,days:{sales:0, day:\"\", profit:0, product_id:\"\"}},\n    campaigns: [],\n    products:{}\n  }\n\n  //User\n  const {user, setUser} = useContext(UserContext);\n  //UI Widgets\n  const [overview, setOverview] = useState(emptyPackage.today);\n  const [sales, setSales] = useState(emptyPackage.sales);\n  const [campaigns, setCampaigns] = useState(emptyPackage.campaigns);\n  const [productsNames, setProductsNames] = useState(emptyPackage.products);\n\n  useEffect(() => {\n    console.log(user)\n    //Making sure we're logged in\n    if((props.history.location.state === undefined) && (user.id === undefined || user.id===\"\")){\n      props.history.push({pathname: Routes.Signin.path});\n    }\n    else{\n      (async () => {\n        var channel_id;\n        if(props.history.location.state === undefined){\n          channel_id = user.id\n        }\n        else{\n          channel_id = props.history.location.state;\n        }\n        //Setting log in Package\n        var today = new Date();\n        var date = formatDate(today);\n        today.setDate(today.getDate() - 6)\n        var prevDate = formatDate(today);\n        var data = await new Promise((resolve, reject) => {\n          var req = queryDB(prevDate, date, \"login\", user.id);\n          req.then((result) => {\n            resolve({\n              statusCode: 200,\n              body: JSON.stringify(result, null, 4)\n            });\n          });\n        });\n        //Setting up user\n        var logInPackage = JSON.parse(data.body)\n        logInPackage.sales[\"firstDay\"] = prevDate\n        logInPackage.sales[\"lastDay\"] = date\n        logInPackage.today.period = date\n        setUser({id:props.history.location.state, name:logInPackage.client.rows[0].yt_name, img: logInPackage.client.rows[0].logo, rate: logInPackage.client.rows[0].rate, settings:logInPackage.client.rows[0], admin: logInPackage.client.rows[0].admin, clients: logInPackage.clients})\n        //Setting up UI\n        setProductsNames(getProductNames(logInPackage.campaigns))\n        setOverview(prepToday(logInPackage.today, productsNames));\n        setSales(prepSales(logInPackage.sales));\n        setCampaigns(prepCampaigns(logInPackage.campaigns,logInPackage.client.rows[0].rate));\n\n      })()\n    }\n  },[])\n\n\n  //Button Events\n  async function overviewToday(){\n    //change color\n    var classname = document.getElementById(\"1\").className;\n    classname = classname.replace(\"btn-secondary\",\"btn-primary\");\n    document.getElementById(\"1\").className = classname;\n\n    classname = document.getElementById(\"2\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"2\").className = classname;\n\n    classname = document.getElementById(\"3\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"3\").className = classname;\n\n    //Getting today\n    var today = new Date();\n    var date = formatDate(today);\n\n    var data = await queryDB(date, \"\", \"sales\", user.id);\n    data.period = \"date\";\n    if(data.rows.length === 0){\n      setOverview(prepToday({rows:[{sales:0, day:date, profit:0, product_id:\"\"}],period: date}, {}));\n    }\n    else{\n      setOverview(prepToday(data, productsNames))\n    }\n  }\n  async function overviewWeek(){\n    //change color\n    var classname = document.getElementById(\"1\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"1\").className = classname;\n\n    classname = document.getElementById(\"2\").className;\n    classname = classname.replace(\"btn-secondary\",\"btn-primary\");\n    document.getElementById(\"2\").className = classname;\n\n    classname = document.getElementById(\"3\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"3\").className = classname;\n\n    //Getting today\n    var today = new Date();\n    var date = formatDate(today);\n    today.setDate(today.getDate() - 6)\n    var prevDate = formatDate(today);\n\n    var data = await queryDB(prevDate, date, \"sales\", user.id);\n    data.period = \"This week\"\n    if(data.rows.length === 0){\n      setOverview(prepToday({rows:[{sales:0, day:date, profit:0, product_id:\"\"}], period:\"This Week\"},{}));\n    }\n    else{\n      setOverview(prepToday(data, productsNames))\n    }\n  }\n  async function overviewMonth(){\n    //change color\n    var classname = document.getElementById(\"1\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"1\").className = classname;\n\n    classname = document.getElementById(\"2\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"2\").className = classname;\n\n    classname = document.getElementById(\"3\").className;\n    classname = classname.replace(\"btn-secondary\",\"btn-primary\");\n    document.getElementById(\"3\").className = classname;\n\n    //Getting today\n    var today = new Date();\n    var firstDay = new Date(today.getFullYear(), today.getMonth(), 1);\n    var lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);\n    var date = formatDate(firstDay);\n    var prevDate = formatDate(lastDay);\n\n    var data = await queryDB(date, prevDate, \"sales\", user.id);\n    data.period = \"This month\"\n    if(data.rows.length === 0){\n      setOverview(prepToday({rows:[{sales:0, day:date, profit:0, product_id:\"\"}],period:\"This month\"},{}));\n    }\n    else{\n      setOverview(prepToday(data, productsNames))\n    }\n  }\n  async function salesWeek(){\n    //change color\n    var classname = document.getElementById(\"4\").className;\n    classname = classname.replace(\"btn-secondary\",\"btn-primary\");\n    document.getElementById(\"4\").className = classname;\n\n    classname = document.getElementById(\"5\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"5\").className = classname;\n\n    classname = document.getElementById(\"6\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"6\").className = classname;\n\n    //Getting today\n    var today = new Date();\n    var date = formatDate(today);\n    today.setDate(today.getDate() - 6)\n    var prevDate = formatDate(today);\n\n    var data = await queryDB(prevDate, date, \"sales\", user.id);\n    if(data.rows.length === 0){\n      setSales(prepSales({firstDay:\"\", lastDay:\"\", rows:[{sales:0, day:date, profit:0, product_id:\"\"}]}));\n    }\n    else{\n      data[\"firstDay\"] = prevDate;\n      data[\"lastDay\"] = date;\n      setSales(prepSales(data))\n    }\n  }\n  async function salesMonth(){\n    //change color\n    var classname = document.getElementById(\"4\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"4\").className = classname;\n\n    classname = document.getElementById(\"5\").className;\n    classname = classname.replace(\"btn-secondary\",\"btn-primary\");\n    document.getElementById(\"5\").className = classname;\n\n    classname = document.getElementById(\"6\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"6\").className = classname;\n\n    //Getting today\n    var today = new Date();\n    var firstDay = new Date(today.getFullYear(), today.getMonth(), 1);\n    var lastDay = new Date(today.getFullYear(), today.getMonth() + 1, 0);\n    var date = formatDate(firstDay);\n    var prevDate = formatDate(lastDay);\n\n    var data = await queryDB(date, prevDate, \"sales\", user.id);\n    if(data.rows.length === 0){\n      setSales(prepSales({firstDay:\"\", lastDay:\"\", rows:[{sales:0, day:date, profit:0, product_id:\"\"}]}));\n    }\n    else{\n      data[\"firstDay\"] = date;\n      data[\"lastDay\"] = prevDate;\n      setSales(prepSales(data))\n    }\n  }\n  async function salesCustom(e, range){\n    //console.log(range)\n    //change color\n    var classname = document.getElementById(\"4\").className;\n    classname = classname.replace(\"btn-primary\",\"btn-secondary\");\n    document.getElementById(\"4\").className = classname;\n\n    classname = document.getElementById(\"5\").className;\n    classname = classname.replace(\"btn-secondary\",\"btn-secondary\");\n    document.getElementById(\"5\").className = classname;\n\n    classname = document.getElementById(\"6\").className;\n    classname = classname.replace(\"btn-secondary\",\"btn-primary\");\n    document.getElementById(\"6\").className = classname;\n\n    var start = range.startDate;\n    var end = range.endDate;\n    var date = formatDate(new Date(start));\n    var prevDate = formatDate(new Date(end));\n\n    var data = await queryDB(date, prevDate, \"sales\", user.id);\n    if(data.rows.length === 0){\n      setSales(prepSales({firstDay:\"\", lastDay:\"\", rows:[{sales:0, day:date, profit:0, product_id:\"\"}]}));\n    }\n    else{\n      data[\"firstDay\"] = date;\n      data[\"lastDay\"] = prevDate;\n      setSales(prepSales(data))\n    }\n  }\n\n  return (\n    <>\n      <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4\">\n        <h2> Sales Overview</h2>\n\n        <div className=\"d-flex ms-auto\">\n            <Button id=\"1\" variant=\"primary\" size=\"sm\" className=\"me-2\" onClick={overviewToday}>Today</Button>\n            <Button id=\"2\" variant=\"secondary\" size=\"sm\" className=\"me-2\" onClick={overviewWeek}>This Week</Button>\n            <Button id=\"3\" variant=\"secondary\" size=\"sm\" className=\"me-3\" onClick={overviewMonth}>This Month</Button>\n        </div>\n      </div>\n\n      <Row className=\"justify-content-md-center\">\n      <Col xs={12} sm={6} xl={4} className=\"mb-4\">\n          <CounterWidget\n            category=\"Sales\"\n            title={overview.sales}\n            period={overview.period}\n            percentage={0}\n            icon={faChartLine}\n            iconColor=\"shape-secondary\"\n          />\n        </Col>\n\n        <Col xs={12} sm={6} xl={4} className=\"mb-4\">\n          <CounterWidget\n            category=\"Profit\"\n            title={(parseInt(overview.profit) * user.rate).toFixed(2)}\n            period={overview.period}\n            percentage={28.4}\n            icon={faCashRegister}\n            iconColor=\"shape-tertiary\"\n          />\n        </Col>\n\n        <Col xs={12} sm={6} xl={4} className=\"mb-4\">\n          <CircleChartWidget\n            title=\"Products\"\n            data={overview.products} />\n        </Col>\n\n        <Col xs={12} className=\"mb-4 d-none d-sm-block\">\n          <SalesValueWidget\n            title=\"Sales Profit\"\n            value={sales.total * user.rate}\n            data={sales.days}\n            custom={salesCustom}\n            week={salesWeek}\n            month={salesMonth}\n          />\n        </Col>\n        <Col xs={12} className=\"mb-4 d-sm-none\">\n          <SalesValueWidgetPhone\n            title=\"Sales Value\"\n            value={sales.total * user.rate}\n            data={sales.days}\n            custom={salesCustom}\n            week={salesWeek}\n            month={salesMonth}\n          />\n        </Col>\n      </Row>\n\n      <Row>\n        <Col xs={12} xl={12} className=\"mb-4\">\n          <Row>\n            <TransactionsTable data={campaigns} />\n          </Row>\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nfunction prepToday(data, productsNames){\n  var products = {};\n  var tmp = {\"sales\": 0, \"profit\": 0, \"products\":[],\"date\":formatDate(new Date())};\n  for(var i = 0; i < data.rows.length; i++){\n    tmp[\"sales\"] = tmp[\"sales\"] + data.rows[i].sales;\n    tmp[\"profit\"] = tmp[\"profit\"] + data.rows[i].profit;\n\n    if(products[data.rows[i].product_id]===undefined){\n      products[data.rows[i].product_id] = data.rows[i].sales;\n    }\n    else{\n      products[data.rows[i].product_id] = data.rows[i].sales + products[data.rows[i].product_id];\n    }\n  }\n  if(tmp.sales !== 0){\n    i = 0;\n    for(const product in products){\n      tmp.products.push({\"id\": i+1, \"label\": productsNames[product], \"value\": products[product]})\n      i = i+1;\n    }\n  }\n\n  tmp.period = data.period;\n  return tmp;\n}\n\nfunction prepSales(data){\n  var tmp = {\"total\": 0, \"days\": {\"labels\" :[], \"series\": []}};\n  var days = {};\n\n  //Create days data structure\n  if(data.firstDay !== \"\"){\n    var start = new Date(data.firstDay);\n    start.setDate(start.getDate() +1);\n    var end = new Date(data.lastDay);\n    end.setDate(end.getDate() +1);\n\n    var loop = new Date(start);\n    while(loop <= end){\n       var date = formatDate(loop);\n       date = date.substring(5,7) + \"/\" + date.substring(8,10)\n       days[date] = 0;\n       var newDate = loop.setDate(loop.getDate() + 1);\n       loop = new Date(newDate);\n    }\n  }\n\n  //fill in dates\n  for(var i = 0; i < data.rows.length; i++){\n    tmp.total = tmp.total + data.rows[i].profit\n    date = data.rows[i].day.substring(5,7) + \"/\" + data.rows[i].day.substring(8,10);\n    if(days[date] === undefined){\n      days[date] = data.rows[i].sales;\n    }\n    else{\n      days[date] = days[date] + data.rows[i].sales;\n    }\n  }\n\n  var series = [];\n  for(const day in days){\n    tmp.days.labels.push(day);\n    series.push(days[day]);\n  }\n  tmp.days.series.push(series);\n  return tmp;\n}\n\nfunction prepCampaigns(data, rate){\n  var tmp = [];\n  for(var i = 0; i < data.rows.length; i++){\n    var row = {\"products\": data.rows[i].img_url, \"day\": data.rows[i].start_date.substring(0,10), \"sales\": data.rows[i].sales, \"profit\": (data.rows[i].profit * rate).toFixed(2)};\n    tmp.push(row);\n  }\n\n  return tmp;\n}\n\nfunction getProductNames(data){\n  var tmp = {}\n  for(var i = 0; i < data.rows.length; i++){\n    tmp[data.rows[i].product_id] = data.rows[i].short_name\n  }\n  return tmp;\n}\n\nasync function queryDB(start, end, q, id){\n    //Building API Call\n    var url = \"https://d7rc7vsgld.execute-api.us-west-2.amazonaws.com/dev/q?id=\" + id;\n    if(q !== \"\"){\n      url += \"&q=\"+q\n    }\n    if(start !== \"\"){\n      url += \"&start=\"+start\n    }\n    if(end !== \"\"){\n      url += \"&end=\"+end\n    }\n\n    //Making Call\n    const Response = await new Promise((resolve, reject) => {\n  \tvar req = fetch(url, {\n  \t\tmethod: 'GET', // *GET, POST, PUT, DELETE, etc.\n  \t\tmode: 'cors', // no-cors, *cors, same-origin\n  \t\tcache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n  \t\tcredentials: 'same-origin', // include, *same-origin, omit\n  \t\theaders: {\n  \t\t  'Content-Type': 'text/plain',\n  \t\t  // 'Content-Type': 'application/x-www-form-urlencoded',\n  \t\t},\n  \t\tredirect: 'follow', // manual, *follow, error\n  \t\treferrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n  \t});\n  \treq.then((result) => {\n  \t    var res = result.json()\n  \t    res.then((tmp) => {\n  \t        resolve({\n      \t\t    statusCode: 200,\n      \t\t    body: JSON.stringify(tmp, null, 4)\n      \t    });\n  \t    });\n  \t});\n    });\n    var tmp = (JSON.parse(Response.body));\n    return tmp;\n}\n\nfunction formatDate(day){\n  var date;\n  if(day.getMonth() < 9){\n    date = day.getFullYear()+'-0'+(day.getMonth()+1)\n  }\n  else{\n    date = day.getFullYear()+'-'+(day.getMonth()+1)\n  }\n  if(day.getDate() < 9){\n    date = date +'-0'+day.getDate();\n  }\n  else{\n    date = date +'-'+day.getDate();\n  }\n\n  return date;\n}\n"]},"metadata":{},"sourceType":"module"}