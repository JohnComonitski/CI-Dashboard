{"ast":null,"code":"var _jsxFileName = \"/Users/johncomonitski/Programming Projects/Dashboard2/Dashboard/src/pages/dashboard/DashboardOverview.js\";\nimport React, { useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCashRegister, faChartLine, faCloudUploadAlt, faPlus, faRocket, faTasks, faUserShield } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Button, Dropdown, ButtonGroup } from '@themesberg/react-bootstrap';\nimport { CounterWidget, CircleChartWidget, BarChartWidget, ProductsWidget, ProgressTrackWidget, RankingWidget, SalesValueWidget, SalesValueWidgetPhone, AcquisitionWidget } from \"../../components/Widgets\";\nimport { PageVisitsTable, TransactionsTable } from \"../../components/Tables\";\nimport { trafficShares, totalOrders } from \"../../data/charts\";\nexport default (props => {\n  const emptyPackage = {\n    today: {\n      rows: [{\n        sales: 0,\n        day: \"\",\n        profit: 0,\n        product_id: \"\"\n      }]\n    },\n    sales: {\n      rows: [{\n        sales: 0,\n        day: \"\",\n        profit: 0,\n        product_id: \"\"\n      }, {\n        sales: 0,\n        day: \"\",\n        profit: 0,\n        product_id: \"\"\n      }]\n    },\n    campaigns: {\n      rows: [{\n        active: \"\",\n        client_id: \"\",\n        end_date: \"\"\n      }]\n    }\n  }; //Client ID\n\n  const [userID, setUserID] = useState(props.history.location.state);\n  const [logInPackage, setLogInPackage] = useState(emptyPackage); //UI Widgets\n\n  const [overview, setOverview] = useState(emptyPackage.today);\n  const [sales, setSales] = useState(emptyPackage.sales);\n  const [campaigns, setCampaigns] = useState(emptyPackage.campaigns);\n  useEffect(() => {\n    (async () => {\n      //Setting log in Package\n      var data = await new Promise((resolve, reject) => {\n        var req = onLogin(props);\n        req.then(result => {\n          resolve({\n            statusCode: 200,\n            body: JSON.stringify(result, null, 4)\n          });\n        });\n      });\n      setLogInPackage(JSON.parse(data.body));\n      setOverview(prepToday(JSON.parse(data.body).today));\n      setSales(prepSales(JSON.parse(data.body).sales));\n      console.log(trafficShares);\n    })();\n  }, [userID]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, \" Sales Overview\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex ms-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    size: \"sm\",\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, \"Today\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    size: \"sm\",\n    className: \"me-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }, \"This Week\"), /*#__PURE__*/React.createElement(Button, {\n    variant: \"secondary\",\n    size: \"sm\",\n    className: \"me-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, \"This Month\"))), /*#__PURE__*/React.createElement(Row, {\n    className: \"justify-content-md-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(CounterWidget, {\n    category: \"Sales\",\n    title: overview.sales,\n    period: overview.date,\n    percentage: 0,\n    icon: faChartLine,\n    iconColor: \"shape-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CounterWidget, {\n    category: \"Profit\",\n    title: overview.profit,\n    period: overview.date,\n    percentage: 28.4,\n    icon: faCashRegister,\n    iconColor: \"shape-tertiary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    sm: 6,\n    xl: 4,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CircleChartWidget, {\n    title: \"Products\",\n    data: overview.products,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"mb-4 d-none d-sm-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SalesValueWidget, {\n    title: \"Sales Profit\",\n    value: \"10,567\",\n    percentage: 10.57,\n    data: [],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    className: \"mb-4 d-sm-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SalesValueWidgetPhone, {\n    title: \"Sales Value\",\n    value: \"10,567\",\n    percentage: 10.57,\n    data: [],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 12,\n    xl: 12,\n    className: \"mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(TransactionsTable, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  })))));\n});\n\nfunction prepToday(data) {\n  var products = [];\n  var tmp = {\n    \"sales\": 0,\n    \"profit\": 0,\n    \"products\": {},\n    \"date\": data.rows[0].day.substring(0, 10)\n  };\n\n  for (var i = 0; i < data.rows.length; i++) {\n    tmp[\"sales\"] = tmp[\"sales\"] + data.rows[i].sales;\n    tmp[\"profit\"] = tmp[\"profit\"] + data.rows[i].profit;\n    products.push({\n      \"id\": i + 1,\n      \"label\": data.rows[i].product_id,\n      \"value\": data.rows[i].sales\n    });\n  }\n\n  tmp[\"products\"] = products;\n  return tmp;\n}\n\nfunction prepSales(data) {\n  /*\n  const data = {\n    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n    series: [[1, 2, 2, 3, 3, 4, 3]]\n  };\n  */\n  var tmp = {\n    \"total\": 0,\n    \"days\": {\n      \"labels\": [],\n      \"series\": []\n    }\n  };\n  var days = {};\n\n  for (var i = 0; i < data.rows.length; i++) {\n    if (days[data.rows[i].day.substring(0, 10)] == undefined) {\n      days[data.rows[i].day.substring(0, 10)] = data.rows[i].sales;\n      tmp.total = tmp.total + data.rows[i].sales;\n    } else {\n      days[data.rows[i].day.substring(0, 10)] = days[data.rows[i].day.substring(0, 10)] + data.rows[i].sales;\n    }\n  }\n\n  var series = [];\n\n  for (const day in days) {\n    tmp.days.labels.push(day);\n    series.push(days[day]);\n  }\n\n  tmp.days.series.push(series);\n  console.log(tmp);\n  return tmp;\n}\n\nasync function onLogin(props) {\n  //API Params\n  var start = \"2020-09-10\";\n  var end = \"2020-09-16\";\n  var id = props.history.location.state;\n  var q = \"login\"; //Building API Call\n\n  var url = \"https://d7rc7vsgld.execute-api.us-west-2.amazonaws.com/dev/q?id=\" + id;\n\n  if (q != \"\") {\n    url += \"&q=\" + q;\n  }\n\n  if (start != \"\") {\n    url += \"&start=\" + start;\n  }\n\n  if (end != \"\") {\n    url += \"&end=\" + end;\n  } //Making Call\n\n\n  const Response = await new Promise((resolve, reject) => {\n    var req = fetch(url, {\n      method: 'GET',\n      // *GET, POST, PUT, DELETE, etc.\n      mode: 'cors',\n      // no-cors, *cors, same-origin\n      cache: 'no-cache',\n      // *default, no-cache, reload, force-cache, only-if-cached\n      credentials: 'same-origin',\n      // include, *same-origin, omit\n      headers: {\n        'Content-Type': 'text/plain' // 'Content-Type': 'application/x-www-form-urlencoded',\n\n      },\n      redirect: 'follow',\n      // manual, *follow, error\n      referrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n\n    });\n    req.then(result => {\n      var res = result.json();\n      res.then(tmp => {\n        resolve({\n          statusCode: 200,\n          body: JSON.stringify(tmp, null, 4)\n        });\n      });\n    });\n  });\n  var tmp = JSON.parse(Response.body);\n  return tmp;\n}","map":{"version":3,"sources":["/Users/johncomonitski/Programming Projects/Dashboard2/Dashboard/src/pages/dashboard/DashboardOverview.js"],"names":["React","useState","useEffect","FontAwesomeIcon","faCashRegister","faChartLine","faCloudUploadAlt","faPlus","faRocket","faTasks","faUserShield","Col","Row","Button","Dropdown","ButtonGroup","CounterWidget","CircleChartWidget","BarChartWidget","ProductsWidget","ProgressTrackWidget","RankingWidget","SalesValueWidget","SalesValueWidgetPhone","AcquisitionWidget","PageVisitsTable","TransactionsTable","trafficShares","totalOrders","props","emptyPackage","today","rows","sales","day","profit","product_id","campaigns","active","client_id","end_date","userID","setUserID","history","location","state","logInPackage","setLogInPackage","overview","setOverview","setSales","setCampaigns","data","Promise","resolve","reject","req","onLogin","then","result","statusCode","body","JSON","stringify","parse","prepToday","prepSales","console","log","date","products","tmp","substring","i","length","push","days","undefined","total","series","labels","start","end","id","q","url","Response","fetch","method","mode","cache","credentials","headers","redirect","referrerPolicy","res","json"],"mappings":"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","sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCashRegister, faChartLine, faCloudUploadAlt, faPlus, faRocket, faTasks, faUserShield } from '@fortawesome/free-solid-svg-icons';\nimport { Col, Row, Button, Dropdown, ButtonGroup } from '@themesberg/react-bootstrap';\n\nimport { CounterWidget, CircleChartWidget, BarChartWidget, ProductsWidget, ProgressTrackWidget, RankingWidget, SalesValueWidget, SalesValueWidgetPhone, AcquisitionWidget } from \"../../components/Widgets\";\nimport { PageVisitsTable, TransactionsTable } from \"../../components/Tables\";\nimport { trafficShares, totalOrders } from \"../../data/charts\";\n\nexport default (props) => {\n\n  const emptyPackage = {\n    today: {rows:[{sales:0, day:\"\", profit:0, product_id:\"\"}]},\n    sales: {rows:[{sales:0, day:\"\", profit:0, product_id:\"\"},{sales:0, day:\"\", profit:0, product_id:\"\"}]},\n    campaigns: {rows:[{active:\"\",client_id:\"\", end_date:\"\"}]}\n  }\n\n   //Client ID\n  const [userID, setUserID] = useState(props.history.location.state);\n  const [logInPackage, setLogInPackage] = useState(emptyPackage);\n  //UI Widgets\n  const [overview, setOverview] = useState(emptyPackage.today);\n  const [sales, setSales] = useState(emptyPackage.sales);\n  const [campaigns, setCampaigns] = useState(emptyPackage.campaigns);\n\n  useEffect(() => {\n    (async () => {\n      //Setting log in Package\n      var data = await new Promise((resolve, reject) => {\n        var req = onLogin(props);\n        req.then((result) => {\n          resolve({\n            statusCode: 200,\n            body: JSON.stringify(result, null, 4)\n          });\n        });\n      });\n      setLogInPackage(JSON.parse(data.body));\n      setOverview(prepToday(JSON.parse(data.body).today));\n      setSales(prepSales(JSON.parse(data.body).sales));\n\n      console.log(trafficShares);\n\n    })()\n  },[userID])\n\n\n  return (\n    <>\n      <div className=\"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center py-4\">\n        <h2> Sales Overview</h2>\n\n        <div className=\"d-flex ms-auto\">\n            <Button variant=\"primary\" size=\"sm\" className=\"me-2\">Today</Button>\n            <Button variant=\"secondary\" size=\"sm\" className=\"me-2\">This Week</Button>\n            <Button variant=\"secondary\" size=\"sm\" className=\"me-3\">This Month</Button>\n        </div>\n      </div>\n\n      <Row className=\"justify-content-md-center\">\n      <Col xs={12} sm={6} xl={4} className=\"mb-4\">\n          <CounterWidget\n            category=\"Sales\"\n            title={overview.sales}\n            period={overview.date}\n            percentage={0}\n            icon={faChartLine}\n            iconColor=\"shape-secondary\"\n          />\n        </Col>\n\n        <Col xs={12} sm={6} xl={4} className=\"mb-4\">\n          <CounterWidget\n            category=\"Profit\"\n            title={overview.profit}\n            period={overview.date}\n            percentage={28.4}\n            icon={faCashRegister}\n            iconColor=\"shape-tertiary\"\n          />\n        </Col>\n\n        <Col xs={12} sm={6} xl={4} className=\"mb-4\">\n          <CircleChartWidget\n            title=\"Products\"\n            data={overview.products} />\n        </Col>\n\n        <Col xs={12} className=\"mb-4 d-none d-sm-block\">\n          <SalesValueWidget\n            title=\"Sales Profit\"\n            value=\"10,567\"\n            percentage={10.57}\n            data={[]}\n          />\n        </Col>\n        <Col xs={12} className=\"mb-4 d-sm-none\">\n          <SalesValueWidgetPhone\n            title=\"Sales Value\"\n            value=\"10,567\"\n            percentage={10.57}\n            data={[]}\n          />\n        </Col>\n      </Row>\n\n      <Row>\n        <Col xs={12} xl={12} className=\"mb-4\">\n          <Row>\n            <TransactionsTable />\n          </Row>\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nfunction prepToday(data){\n  var products = [];\n  var tmp = {\"sales\": 0, \"profit\": 0, \"products\":{},\"date\":data.rows[0].day.substring(0,10)};\n  for(var i = 0; i < data.rows.length; i++){\n    tmp[\"sales\"] = tmp[\"sales\"] + data.rows[i].sales;\n    tmp[\"profit\"] = tmp[\"profit\"] + data.rows[i].profit;\n    products.push({\"id\": i+1, \"label\": data.rows[i].product_id, \"value\": data.rows[i].sales})\n  }\n  tmp[\"products\"] = products\n  return tmp;\n}\n\nfunction prepSales(data){\n/*\nconst data = {\n  labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\n  series: [[1, 2, 2, 3, 3, 4, 3]]\n};\n*/\n  var tmp = {\"total\": 0, \"days\": {\"labels\" :[], \"series\": []}};\n  var days = {};\n  for(var i = 0; i < data.rows.length; i++){\n    if(days[data.rows[i].day.substring(0,10)] == undefined){\n      days[data.rows[i].day.substring(0,10)] = data.rows[i].sales;\n      tmp.total = tmp.total + data.rows[i].sales\n    }\n    else{\n      days[data.rows[i].day.substring(0,10)] = days[data.rows[i].day.substring(0,10)] + data.rows[i].sales;\n    }\n  }\n\n  var series = [];\n  for(const day in days){\n    tmp.days.labels.push(day);\n    series.push(days[day]);\n  }\n  tmp.days.series.push(series);\n  console.log(tmp);\n  return tmp;\n}\n\nasync function onLogin(props){\n    //API Params\n    var start = \"2020-09-10\";\n    var end = \"2020-09-16\";\n    var id = props.history.location.state;\n    var q = \"login\"\n\n    //Building API Call\n    var url = \"https://d7rc7vsgld.execute-api.us-west-2.amazonaws.com/dev/q?id=\" + id;\n    if(q != \"\"){\n      url += \"&q=\"+q\n    }\n    if(start != \"\"){\n      url += \"&start=\"+start\n    }\n    if(end != \"\"){\n      url += \"&end=\"+end\n    }\n\n    //Making Call\n    const Response = await new Promise((resolve, reject) => {\n  \tvar req = fetch(url, {\n  \t\tmethod: 'GET', // *GET, POST, PUT, DELETE, etc.\n  \t\tmode: 'cors', // no-cors, *cors, same-origin\n  \t\tcache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n  \t\tcredentials: 'same-origin', // include, *same-origin, omit\n  \t\theaders: {\n  \t\t  'Content-Type': 'text/plain',\n  \t\t  // 'Content-Type': 'application/x-www-form-urlencoded',\n  \t\t},\n  \t\tredirect: 'follow', // manual, *follow, error\n  \t\treferrerPolicy: 'no-referrer' // no-referrer, *no-referrer-when-downgrade, origin, origin-when-cross-origin, same-origin, strict-origin, strict-origin-when-cross-origin, unsafe-url\n  \t});\n  \treq.then((result) => {\n  \t    var res = result.json()\n  \t    res.then((tmp) => {\n  \t        resolve({\n      \t\t    statusCode: 200,\n      \t\t    body: JSON.stringify(tmp, null, 4)\n      \t    });\n  \t    });\n  \t});\n    });\n    var tmp = (JSON.parse(Response.body));\n    return tmp;\n}\n"]},"metadata":{},"sourceType":"module"}